<?xml version="1.0" ?>
<diagram
    xmlns="msdl.uantwerpen.be/sccd"
    author="Glenn De Jonghe"
    name="TestHistory">
    <description>
        Testing the History state.
    </description>
    <inport name="in"/>
    <outport name="out"/>
    <class name="Class1" default="true">
        <scxml initial="composite_1"
            big_step_maximality="take_many">
            <state id="composite_1" initial="state_1">
                <state id="state_1">
                    <onentry>
                        <raise port="out" event="in_state_1"/>
                    </onentry>
                    <transition port="in" event="to_state_2" target="../state_2"/>
                </state>
                <state id="state_2">
                    <onentry>
                        <raise port="out" event="in_state_2"/>
                    </onentry>
                </state>
                <history id="composite_history">
                    <transition target="../state_1"/>
                </history>
                <transition port="in" event="to_state_3" target="../state_3"/>
            </state>
            <state id="state_3">
                <onentry>
                    <raise port="out" event="in_state_3"/>
                </onentry>
                <transition target="/composite_1/composite_history"/>
            </state>
        </scxml>
    </class>
    <test>
        <input>
            <event name="to_state_2" port="in" time="0"/>
            <event name="to_state_3" port="in" time="0"/>
        </input>
        <expected>
            <slot>
                <!-- initialization -->
                <event name="in_state_1" port="out"/>
            </slot>
            <slot>
                <!-- big step with input 'to_state_2' -->
                <event name="in_state_2" port="out"/>
            </slot>
            <slot>
                <!-- big step with input 'to_state_3' -->
                <event name="in_state_3" port="out"/>
                <event name="in_state_2" port="out"/>
            </slot>
        </expected>
    </test>
</diagram>
